#!/bin/sh

MESSAGE_FILE="$1"

# If the file already has real content (not just comments/blank lines), keep it.
if [ -f "$MESSAGE_FILE" ]; then
  if sed -e '/^[[:space:]]*#/d' -e '/^[[:space:]]*$/d' "$MESSAGE_FILE" | grep -q '.'; then
    exit 0
  fi
fi

BRANCH=$(git symbolic-ref --short HEAD 2>/dev/null || echo main)
BRANCH_SLUG=$(echo "$BRANCH" | tr '/ ' '-')
DEFAULT_MESSAGE="chore(${BRANCH_SLUG}): update"

echo "$DEFAULT_MESSAGE" > "$MESSAGE_FILE"
